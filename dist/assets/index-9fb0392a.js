import{J as x,e as c,R as h,a as g,j as e,W as N,X as j,Y as m,u,H as w}from"./index-d69f0e7c.js";import{d as y}from"./dayjs.min-1d2ee850.js";import{c as R}from"./cartApi-77607f74.js";import{S as f}from"./index-8af381f0.js";x({key:"cartListAtom",default:{}});const i=x({key:"sidebarHistoryStateAtom",default:{status:"CART_LIST"}}),E=()=>{const{t:s}=c(),{status:l}=h(i),r=g(i);return e.jsx("article",{className:"w-full px-4 py-8 h-full border-r-1 border-solid border-gray-200",children:e.jsxs("section",{className:"flex flex-col space-y-2",children:[e.jsx("h4",{className:"text-xl",children:s("HISTORY_VIEW.MANAGE_CART_ORDER")}),e.jsxs("ul",{className:"pl-4 w-full flex flex-col space-y-2 text-gray-500",children:[e.jsx("li",{children:e.jsx("p",{className:`${l==="CART_LIST"?"text-orange-500":""} cursor-pointer`,onClick:()=>{r({status:"CART_LIST"})},children:s("HISTORY_VIEW.CART_LIST")})}),e.jsx("li",{children:e.jsx("p",{className:`${l==="HAVE_ORDERED"?"text-orange-500":""} cursor-pointer`,onClick:()=>{r({status:"HAVE_ORDERED"})},children:s("HISTORY_VIEW.HAVE_ORDERED")})})]})]})})},p=N({key:"cartListSelector",get:async()=>{try{const s=await R.getCart();return{message:s.data.message,data:s.data.data}}catch(s){return{message:s.data,data:[]}}}}),_=s=>{const{id:l,status:r,price:t,create_at:n}=s,o=u(),{t:a}=c(),d=b=>(b.preventDefault(),o(`/secure/${l}`));return e.jsx(e.Fragment,{children:e.jsxs("tr",{onClick:d,className:"h-16 w-full bg-gray-50 table--body-row",children:[e.jsx("td",{className:"",children:e.jsx("p",{className:"flex justify-center items-center w-full",children:l})}),e.jsx("td",{children:e.jsx("p",{className:"flex justify-center items-center w-full",children:y(n).format("HH:mm:ss  DD-MMM-YYYY")})}),e.jsx("td",{className:"content-center ",children:e.jsx("p",{className:"w-full flex justify-center items-center",children:t})}),e.jsx("td",{children:e.jsxs("p",{className:"w-full flex justify-center items-center",children:[r==="prepare"&&e.jsx("p",{style:{color:"#A9A9A9"},children:a("HISTORY_LABEL.PREPARE")}),r==="processing"&&e.jsx("p",{style:{color:"#FFA33C"},children:a("HISTORY_LABEL.PROCESSING")}),r==="deny"&&e.jsx("p",{style:{color:"#DF2E38"},children:a("HISTORY_LABEL.DENY")}),r==="ordered"&&e.jsx("p",{style:{color:"#54B435"},children:a("HISTORY_LABEL.ORDERED")})]})})]})})},A=()=>{const{t:s}=c(),{state:l,contents:r}=j(p);return e.jsxs(e.Fragment,{children:[l==="hasValue"&&e.jsx(f,{className:"overflow-y-scroll w-full rounded border-1 border-solid border-black",style:{maxHeight:360},children:e.jsxs("table",{className:"w-full h-28 border-0",children:[e.jsx("thead",{className:"w-full h-12 ",style:{tableLayout:"fixed"},children:e.jsxs("tr",{className:"bg-gray-200 border-b-1 border-solid border-gray-100",children:[e.jsx("th",{className:"  bg-gray-200",children:e.jsx("p",{className:"w-full border-x-1 border-solid border-gray-300 py-2",children:"ID"})}),e.jsx("th",{className:" bg-gray-200 w-1/5",children:e.jsx("p",{className:"w-full border-x-1 border-solid border-gray-300 py-2",children:s("HISTORY_LABEL.DAYS")})}),e.jsx("th",{className:" bg-gray-200 w-1/6",children:e.jsx("p",{className:"w-full border-x-1 border-solid border-gray-300 py-2",children:s("HISTORY_LABEL.PRICE")})}),e.jsx("th",{className:" bg-gray-200 w-1/6",children:e.jsx("p",{className:"w-full border-x-1 border-solid border-gray-300 py-2",children:s("HISTORY_LABEL.STATUS")})})]})}),e.jsx("tbody",{className:" hover-cursor w-full",children:r.data.map(t=>e.jsx(_,{id:t.id,status:t.status,price:t.price,create_at:t.create_at},t.id))})]})}),l==="loading"&&e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx(m,{color:"#FFA33C",height:100,width:100})})]})};const S=s=>{const{id:l,status:r,price:t,create_at:n}=s,o=u(),a=d=>(d.preventDefault(),o(`/secure/${l}`));return e.jsx(e.Fragment,{children:e.jsxs("tr",{onClick:a,className:"h-16 w-full bg-gray-50 table--body-row",children:[e.jsx("td",{className:"",children:e.jsx("p",{className:"flex justify-center items-center w-full",children:l})}),e.jsx("td",{children:e.jsx("p",{className:"flex justify-center items-center w-full",children:y(n).format("HH:mm:ss  DD-MMM-YYYY")})}),e.jsx("td",{className:"content-center ",children:e.jsx("p",{className:"w-full flex justify-center items-center",children:t})}),e.jsx("td",{children:e.jsxs("p",{className:"w-full flex justify-center items-center",children:[r==="prepare"&&e.jsx("p",{style:{color:"#A9A9A9"},children:"Prepare"}),r==="processing"&&e.jsx("p",{style:{color:"#FFA33C"},children:"Processing"}),r==="deny"&&e.jsx("p",{style:{color:"#DF2E38"},children:"Deny"}),r==="ordered"&&e.jsx("p",{style:{color:"#54B435"},children:"Ordered"})]})})]})})},H=()=>{const{state:s,contents:l}=j(p);return e.jsxs(e.Fragment,{children:[s==="hasValue"&&e.jsx(f,{className:"overflow-y-scroll w-full rounded border-1 border-solid border-black",style:{maxHeight:360},children:e.jsxs("table",{className:"w-full h-28 border-0",children:[e.jsx("thead",{className:"w-full h-12 ",style:{tableLayout:"fixed"},children:e.jsxs("tr",{className:"bg-gray-200 border-b-1 border-solid border-gray-100",children:[e.jsx("th",{className:"  bg-gray-200",children:e.jsx("p",{className:"w-full border-x-1 border-solid border-gray-300 py-2",children:"ID"})}),e.jsx("th",{className:" bg-gray-200 w-1/5",children:e.jsx("p",{className:"w-full border-x-1 border-solid border-gray-300 py-2",children:"DAYS"})}),e.jsx("th",{className:" bg-gray-200 w-1/6",children:e.jsx("p",{className:"w-full border-x-1 border-solid border-gray-300 py-2",children:"PRICE"})}),e.jsx("th",{className:" bg-gray-200 w-1/6",children:e.jsx("p",{className:"w-full border-x-1 border-solid border-gray-300 py-2",children:"STATUS"})})]})}),e.jsx("tbody",{className:" hover-cursor w-full",children:l.data.map(r=>r.status==="ordered"?e.jsx(S,{id:r.id,status:r.status,price:r.price,create_at:r.create_at},r.id):null)})]})}),s==="loading"&&e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx(m,{color:"#FFA33C",height:100,width:100})})]})},D=()=>{const{t:s}=c(),{status:l}=h(i);return e.jsxs("article",{style:{height:"480px"},className:"mt-28 container mx-auto flex flex-col space-y-4",children:[e.jsxs(w,{children:[e.jsx("meta",{charSet:"urf-8"}),e.jsx("title",{children:"IE104 FRONT END | HISTORY"})]}),e.jsx("section",{className:"py-4",children:e.jsx("h2",{children:s("HISTORY_VIEW.HISTORY_VIEW")})}),e.jsxs("article",{className:"w-full grid grid-cols-4 gap-x-8",children:[e.jsx("section",{className:"col-span-1 flex flex-col justify-center items-center",children:e.jsx(E,{})}),e.jsxs("section",{className:"col-span-3 flex flex-col justify-center items-center",children:[l==="CART_LIST"&&e.jsx(A,{}),l==="HAVE_ORDERED"&&e.jsx(H,{})]})]})]})};export{D as default};
